<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도커로 서비스 구축하기 (1단계: 웹서버)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: A single-column, step-by-step tutorial format is chosen for clarity and ease of following technical instructions. The user flow is linear (top-to-bottom). Key interactions are 'Copy to Clipboard' buttons for commands and configuration files to ensure accuracy, and added verification steps. The structure breaks down the complex task of deploying a service into manageable, verifiable steps, building user confidence. -->
    <!-- Visualization & Content Choices: The source report is a technical tutorial. All content is presented as instructional text and code blocks. 1. Commands/Configs -> Goal: Error-free execution -> Presentation: Styled <pre><code> blocks -> Interaction: JS 'Copy to Clipboard' button. Justification: Prevents typos and user error. | 2. Verification Steps -> Goal: Confirmation of success -> Presentation: Instructional text with placeholder values and explicit commands (e.g., 'ls'). Justification: Guides the user on how to check their work. | All visual structure is achieved with HTML and Tailwind CSS. NO SVG/Mermaid/Charts used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            background-color: #FDFBF8; /* Warm off-white */
            color: #4B4B4B; /* Dark Gray */
        }
        .accent-bg {
            background-color: #6A8D9B; /* Slate Blue */
        }
        .accent-text {
            color: #6A8D9B;
        }
        .accent-border {
            border-color: #6A8D9B;
        }
        .secondary-bg {
            background-color: #F3EFEA; /* Light beige */
        }
        .code-block {
            background-color: #2D3748;
            color: #F7FAFC;
            border-radius: 0.5rem;
            padding: 1rem;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #4A5568;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-btn:hover {
            background-color: #2D3748;
        }
        .step-number {
            background-color: #6A8D9B;
            color: white;
        }
        .info-box {
            background-color: #eef2ff;
            border-left: 4px solid #6366f1;
            padding: 1rem;
            margin-top: 1rem;
            color: #4338ca;
        }
    </style>
</head>
<body class="antialiased">

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-gray-800">도커로 서비스 구축하기</h1>
            <p class="mt-4 text-xl text-gray-600 max-w-2xl mx-auto"><span class="font-semibold accent-text">1단계:</span> 간단한 웹 홈페이지 서비스</p>
        </header>

        <section id="intro" class="mb-12 p-6 secondary-bg rounded-lg">
            <h2 class="text-2xl font-semibold text-gray-700 mb-3">첫 서비스 구축 시작</h2>
            <p class="text-gray-600">도커 설치를 성공적으로 마쳤으니, 이제 본격적으로 도커를 활용해 보겠습니다. 첫 번째 목표는 외부에서 접속할 수 있는 간단한 웹 홈페이지를 띄우는 것입니다. 이 과정을 통해 앞으로 모든 서비스를 관리하게 될 **도커 컴포즈(Docker Compose)**의 기본 개념을 익히게 됩니다.</p>
        </section>

        <section id="steps">
            <h2 class="text-3xl font-bold text-center mb-10 text-gray-800">구축 5단계 (상세 설명 포함)</h2>
            <div class="space-y-10">
                
                <!-- Step 1 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">1</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">프로젝트 폴더 준비하기</h3>
                        <p class="mb-4 text-gray-600">가장 먼저, 앞으로 만들 여러 서비스를 체계적으로 관리하기 위한 폴더를 만들겠습니다. **MobaXterm 터미널**에서 아래 명령어를 실행하여 `my-services`라는 폴더를 만들고, 그 안으로 이동하세요.</p>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyCode(this)">복사</button>
                            <pre class="overflow-x-auto"><code class="language-bash"># my-services 폴더와 그 하위의 webapp 폴더를 한 번에 생성합니다.
mkdir -p my-services/webapp

# my-services 폴더 안으로 들어갑니다. 앞으로의 모든 작업은 이 폴더 안에서 진행됩니다.
cd my-services</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">2</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">간단한 홈페이지 파일 만들기</h3>
                        <p class="mb-4 text-gray-600">이제 웹서버가 보여줄 `index.html` 파일을 `webapp` 폴더 안에 생성합니다. **반드시 `my-services` 폴더 안에서** 아래 박스 전체를 복사하여 터미널에 붙여넣고 Enter를 누르세요. 텍스트 편집기 없이 파일을 만드는 편리한 방법입니다.</p>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyCode(this)">복사</button>
                            <pre class="overflow-x-auto"><code class="language-bash">cat &lt;&lt; 'EOF' &gt; webapp/index.html
&lt;!DOCTYPE html&gt;
&lt;html lang="ko"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;My Docker Web Server&lt;/title&gt;
    &lt;style&gt;
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f8ff; margin: 0; }
        h1 { color: #333; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;🎉 웹서버가 성공적으로 실행되었습니다! 🎉&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
EOF</code></pre>
                        </div>
                        <div class="info-box">
                            <p class="font-semibold">💡 확인하기: `ls webapp` 명령어를 입력해보세요. `index.html` 파일 이름이 보이면 성공입니다.</p>
                        </div>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">3</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">도커 컴포즈(Docker Compose) 설정 파일 만들기</h3>
                        <p class="mb-4 text-gray-600">`docker-compose.yml` 파일은 우리 서비스의 '설계도'와 같습니다. 어떤 프로그램을, 어떻게 실행할지 정의하는 중요한 파일입니다. **`my-services` 폴더 안에서** 아래 내용을 복사/붙여넣기하여 파일을 생성하세요.</p>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyCode(this)">복사</button>
                            <pre class="overflow-x-auto"><code class="language-yaml">cat &lt;&lt; 'EOF' &gt; docker-compose.yml
version: '3.8'

services:
  webserver:
    image: nginx:alpine
    container_name: my-web-server
    ports:
      - "80:80"
    volumes:
      - ./webapp:/usr/share/nginx/html
EOF</code></pre>
                        </div>
                         <div class="info-box">
                            <p class="font-semibold">💡 설계도 살펴보기</p>
                            <ul class="list-disc list-inside mt-2 text-sm">
                                <li><b>image: nginx:alpine</b>: 가볍고 빠른 `nginx`라는 웹서버 프로그램을 사용하겠다고 지정합니다.</li>
                                <li><b>ports: - "80:80"</b>: 내 컴퓨터(서버)의 80번 문(포트)과 웹서버 프로그램의 80번 문을 연결합니다. 그래야 외부에서 접속할 수 있습니다.</li>
                                <li><b>volumes: - ./webapp:...</b>: 방금 만든 `webapp` 폴더와 웹서버 프로그램 안의 폴더를 연결해서, `index.html` 파일을 보여주게 만듭니다.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                     <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">4</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">웹서버 실행하기</h3>
                        <p class="mb-4 text-gray-600">이제 설계도를 바탕으로 웹서버를 실행할 시간입니다. **`my-services` 폴더 안에서** 아래 명령어를 실행하면, 도커가 자동으로 웹서버 프로그램을 다운로드하고 실행합니다. `-d` 옵션은 터미널을 계속 사용할 수 있도록 백그라운드에서 실행하라는 뜻입니다.</p>
                        <div class="code-block">
                             <button class="copy-btn" onclick="copyCode(this)">복사</button>
                             <pre><code class="language-bash">docker compose up -d</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Step 5 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                     <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">5</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">최종 확인</h3>
                        <p class="mb-4 text-gray-600">웹서버가 잘 실행되고 있는지 확인합니다. 먼저, 터미널에서 아래 명령어로 서비스 상태를 확인하세요. `STATUS`가 `running` 또는 `up`으로 표시되면 정상입니다.</p>
                        <div class="code-block mb-4">
                            <button class="copy-btn" onclick="copyCode(this)">복사</button>
                            <pre><code class="language-bash">docker compose ps</code></pre>
                        </div>
                        <p class="mb-4 text-gray-600">마지막으로, 인터넷 브라우저 주소창에 아래 주소를 입력하여 접속해보세요. **Google Cloud 콘솔의 'VM 인스턴스' 메뉴에서 '외부 IP' 주소를 확인**하여 사용하시면 됩니다. 방금 만든 웹페이지가 보이면 성공입니다!</p>
                        <div class="secondary-bg p-4 rounded-lg flex items-center space-x-3">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 accent-text flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m-9 9h18" />
                            </svg>
                            <p class="font-medium text-gray-700">http://&lt;여기에-서버의-외부-IP-주소-입력&gt;</p>
                        </div>
                        <div class="info-box">
                            <p class="font-semibold">⚠️ 만약 접속이 안된다면?</p>
                             <p class="text-sm mt-1">Google Cloud의 '방화벽' 설정에서 'http-server' 또는 'tcp:80' 규칙이 VM 인스턴스에 적용되어 있는지 확인해주세요. 외부에서의 80번 포트 접속을 허용해야 합니다.</p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <footer class="mt-16 text-center border-t pt-8">
            <p class="text-2xl font-bold accent-text">🚀 첫 서비스 배포 성공!</p>
            <p class="text-gray-600 mt-2">도커 컴포즈를 이용하여 첫 번째 웹서비스를 성공적으로 실행했습니다. 다음 단계에서는 이 곳에 다른 서비스들을 추가해 보겠습니다.</p>
        </footer>

    </main>

    <script>
        function copyCode(button) {
            const codeBlock = button.nextElementSibling;
            const code = codeBlock.querySelector('code').innerText;
            
            // Remove comments from bash/yaml for cleaner copy
            const lines = code.split('\n');
            const uncommentedLines = lines.filter(line => !line.trim().startsWith('#'));
            const finalCode = uncommentedLines.join('\n').trim();

            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = finalCode;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                button.textContent = '복사 완료!';
                button.classList.add('accent-bg');
                setTimeout(() => {
                    button.textContent = '복사';
                    button.classList.remove('accent-bg');
                }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                button.textContent = '복사 실패';
            }
            
            document.body.removeChild(tempTextArea);
        }
    </script>
</body>
</html>

