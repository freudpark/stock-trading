<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Cloud VM 도커(Docker) 설치 완벽 가이드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: A single-column, linear, step-by-step tutorial format was chosen. This structure directly mirrors the sequential nature of a technical guide, making it intuitive for a user following instructions. The primary user flow is top-to-bottom scrolling. Key interactions are 'Copy to Clipboard' buttons for code blocks to prevent user error, and a toggleable 'Show Expected Output' section for clear confirmation of success. This design prioritizes ease of use and accuracy, which is critical for a technical tutorial targeting users who may have failed before. -->
    <!-- Visualization & Content Choices: The source report is a technical guide with no quantitative data, so no charts (Chart.js, etc.) were used. The information is presented as follows: 1. Full Shell Script -> Goal: Error-free copying -> Presentation: Styled <pre><code> block -> Interaction: JS 'Copy to Clipboard' button. Justification: Prevents manual selection errors. | 2. Commands -> Goal: Quick copying -> Presentation: Inline code blocks -> Interaction: JS 'Copy' button. Justification: Efficiency. | 3. Success Output -> Goal: User confirmation -> Presentation: Hidden <pre><code> block -> Interaction: JS toggle button. Justification: Provides clear verification without initial clutter. | All visual structure is achieved with HTML and Tailwind CSS. NO SVG/Mermaid used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            background-color: #FDFBF8; /* Warm off-white */
            color: #4B4B4B; /* Dark Gray */
        }
        .accent-bg {
            background-color: #8D9B6A; /* Olive Green */
        }
        .accent-text {
            color: #8D9B6A;
        }
        .accent-border {
            border-color: #8D9B6A;
        }
        .secondary-bg {
            background-color: #F3EFEA; /* Light beige */
        }
        .code-block {
            background-color: #2D3748;
            color: #F7FAFC;
            border-radius: 0.5rem;
            padding: 1rem;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #4A5568;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-btn:hover {
            background-color: #2D3748;
        }
        .step-number {
            background-color: #8D9B6A;
            color: white;
        }
    </style>
</head>
<body class="antialiased">

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-gray-800">Google Cloud VM 도커 설치</h1>
            <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">초보자도 실패 없이 따라 할 수 있는 완벽 가이드입니다.</p>
        </header>

        <section id="intro" class="mb-12 p-6 secondary-bg rounded-lg">
            <h2 class="text-2xl font-semibold text-gray-700 mb-3">시작하기 전에</h2>
            <p class="text-gray-600 mb-4">이 가이드는 Google Cloud Platform(GCP)에서 생성한 가상 머신(VM), 특히 우분투(Ubuntu) 서버에 도커(Docker)를 설치하는 가장 쉽고 확실한 방법을 안내합니다. 이전의 복잡한 과정을 모두 정리하여, 아래 순서대로 따라 하기만 하면 누구나 성공할 수 있습니다.</p>
            <div class="flex items-start space-x-4 p-4 border-l-4 accent-border bg-white rounded-r-lg">
                <div class="flex-shrink-0">
                    <svg class="h-6 w-6 accent-text" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                    </svg>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800">준비물</h3>
                    <ul class="list-disc list-inside mt-1 text-gray-600">
                        <li>Google Cloud Platform에 생성된 VM 인스턴스</li>
                        <li>MobaXterm과 같은 SSH 클라이언트로 서버에 접속된 상태</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="steps">
            <h2 class="text-3xl font-bold text-center mb-10 text-gray-800">설치 4단계</h2>
            <div class="space-y-10">
                <!-- Step 1 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">1</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">만능 설치 스크립트 파일 만들기</h3>
                        <p class="mb-4 text-gray-600">서버에 접속된 터미널 창에서 모든 설치 과정을 자동으로 처리해 줄 '스크립트 파일'을 만듭니다. 아래 회색 박스 안의 내용 전체를 복사하여 터미널 창에 그대로 붙여넣고, Enter 키를 한 번만 누르세요.</p>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyCode(this)">복사</button>
                            <pre class="overflow-x-auto"><code class="language-bash">cat &lt;&lt; 'EOF' &gt; correct_install_docker.sh
#!/bin/bash
# 스크립트 실행 중 오류가 발생하면 즉시 중단합니다.
set -e

echo "=============== 1. [완벽 초기화] 기존의 모든 도커 관련 설정/파일 삭제 ==============="
# 이전의 잘못된 설정을 깨끗하게 지웁니다.
sudo rm -f /etc/apt/sources.list.d/docker.list
sudo rm -f /etc/apt/keyrings/docker.gpg
# dpkg 잠금 문제를 방지하기 위해 추가
sudo killall apt apt-get &gt; /dev/null 2&gt;&1 || true
sudo rm -f /var/lib/apt/lists/lock
sudo rm -f /var/cache/apt/archives/lock
sudo rm -f /var/lib/dpkg/lock*
sudo dpkg --configure -a &gt; /dev/null 2&gt;&1 || true

# 설치된 모든 도커 패키지를 설정 파일까지 완벽하게 삭제합니다.
sudo apt-get purge -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin &gt; /dev/null 2&gt;&1 || true
sudo apt-get autoremove -y &gt; /dev/null 2&gt;&1 || true
echo "=============== 초기화 완료 ==============="
echo ""

echo "=============== 2. 패키지 목록 업데이트 ==============="
sudo apt-get update
echo "=============== 업데이트 완료 ==============="
echo ""

echo "=============== 3. [최종 해결] 도커 공식 통합 스크립트로 설치 시작 ==============="
# 가장 안정적인 공식 통합 스크립트를 다운로드하여 실행합니다.
# 이 스크립트가 OS 버전을 자동으로 감지하여 최적의 방법으로 설치합니다.
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
echo "=============== 도커 설치 완료 ==============="
echo ""

echo "=============== 4. 'sudo' 없이 사용하도록 권한 설정 ==============="
sudo usermod -aG docker $USER
echo "=============== 권한 설정 완료 ==============="
echo ""

echo "✅ 모든 설치 과정이 성공적으로 완료되었습니다!"
echo ""
echo "⚠️ 중요: 지금 바로 SSH 접속을 종료하고 다시 연결하여 모든 변경 사항을 적용해주세요."
echo "   재접속 후 'docker run hello-world' 명령어로 최종 테스트를 진행하세요."
EOF</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">2</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">설치 스크립트 실행하기</h3>
                        <p class="mb-4 text-gray-600">이제 방금 만든 파일을 실행하여 도커 설치를 시작합니다. 아래 명령어를 복사하여 터미널에 입력하고 Enter를 누르세요.</p>
                        <div class="code-block">
                             <button class="copy-btn" onclick="copyCode(this)">복사</button>
                             <pre><code class="language-bash">bash correct_install_docker.sh</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                     <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">3</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">SSH 재접속 (가장 중요!)</h3>
                        <p class="mb-4 text-gray-600">도커를 바로 사용하기 위한 권한을 적용하려면, 반드시 서버와의 연결을 끊었다가 다시 접속해야 합니다. 현재 사용 중인 MobaXterm의 서버 접속 창을 닫고, MobaXterm에서 서버로 다시 접속해주세요.</p>
                        <div class="secondary-bg p-4 rounded-lg flex items-center space-x-3">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 accent-text flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h5M20 20v-5h-5M20 4h-5v5M4 20h5v-5" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 4h5v5M9 20H4v-5M4 4h5v5M20 20h-5v-5" />
                            </svg>
                            <p class="font-medium text-gray-700">현재 SSH 세션을 종료하고 다시 연결하세요.</p>
                        </div>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="flex flex-col md:flex-row items-start gap-6">
                     <div class="step-number w-12 h-12 rounded-full flex items-center justify-center font-bold text-2xl flex-shrink-0">4</div>
                    <div class="w-full">
                        <h3 class="text-2xl font-semibold mb-3 text-gray-700">최종 설치 확인</h3>
                        <p class="mb-4 text-gray-600">새로 접속한 터미널 창에서 아래 명령어를 입력하여 도커가 정말로 잘 설치되었는지 최종 테스트를 합니다.</p>
                        <div class="code-block mb-4">
                            <button class="copy-btn" onclick="copyCode(this)">복사</button>
                            <pre><code class="language-bash">docker run hello-world</code></pre>
                        </div>
                        <button id="showOutputBtn" class="w-full text-center py-2 px-4 border accent-border text-gray-700 rounded-md hover:accent-bg hover:text-white transition-colors">
                            성공 시 예상 결과 보기
                        </button>
                        <div id="expectedOutput" class="hidden mt-4 code-block">
                            <pre class="overflow-x-auto"><code class="language-text">Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
17eec7bbc9d7: Pull complete
Digest: sha256:54e66cc1dd1fcb1c3c58bd8017914dbed8701e2d8c74d9262e26bd9cc1642d31
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="mt-16 text-center border-t pt-8">
            <p class="text-2xl font-bold accent-text">🎉 축하합니다!</p>
            <p class="text-gray-600 mt-2">이제 당신의 Google Cloud 서버에서 도커를 자유롭게 사용할 준비가 모두 끝났습니다.</p>
        </footer>

    </main>

    <script>
        function copyCode(button) {
            const codeBlock = button.nextElementSibling;
            const code = codeBlock.querySelector('code').innerText;
            
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = code;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                button.textContent = '복사 완료!';
                button.classList.add('accent-bg');
                setTimeout(() => {
                    button.textContent = '복사';
                    button.classList.remove('accent-bg');
                }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                button.textContent = '복사 실패';
            }
            
            document.body.removeChild(tempTextArea);
        }

        document.getElementById('showOutputBtn').addEventListener('click', function() {
            const outputDiv = document.getElementById('expectedOutput');
            outputDiv.classList.toggle('hidden');
            if (outputDiv.classList.contains('hidden')) {
                this.textContent = '성공 시 예상 결과 보기';
            } else {
                this.textContent = '결과 숨기기';
            }
        });
    </script>
</body>
</html>
