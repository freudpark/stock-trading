# 한국투자증권 Open API 분석 보고서

## 1. API 제공 현황

### 제공 상품
- **국내주식** (주문, 계좌, 시세 등)
- **국내선물옵션**
- **해외주식** (미국, 중국 등)
- **해외선물옵션**
- **장내채권**

### 제공 방식
1. **REST 방식** - HTTP 기반 요청/응답 (비실시간, 배치 처리에 적합)
2. **Websocket 방식** - 실시간 양방향 통신 (실시간 시세 수신에 적합)

---

## 2. 시스템 구현을 위한 핵심 기능

### A. 데이터 수집 (REST API)
- **국내주식 시세 조회**: 현재가, 고가, 저가, 거래량 등
- **해외주식 시세 조회**: 미국, 중국 등 해외 주식 정보
- **종목 정보 조회**: 종목코드, 이름, 시가총액 등
- **재무정보 조회**: EPS, PER, ROE 등 재무지표

### B. 주문 및 거래 (REST API)
- **매수/매도 주문**: 지정가, 시장가 주문
- **주문 취소**: 미체결 주문 취소
- **계좌 조회**: 보유 종목, 잔고, 수익률 등
- **체결 내역 조회**: 매매 이력 조회

### C. 실시간 시세 (Websocket)
- **실시간 호가**: 최우선 매도/매수호가
- **실시간 체결**: 거래량, 거래가 실시간 수신
- **실시간 뉴스**: 종목 관련 뉴스 피드

---

## 3. 모의투자 및 백테스팅 환경

### 모의투자 계좌
- **신청 방법**: KIS Developers 포털에서 "상시모의투자" 신청
- **특징**: 실제 거래와 동일한 API 사용, 실제 자금 없이 테스트 가능
- **용도**: 자동매매 시스템 검증, 전략 백테스팅

### 백테스팅 데이터
- **과거 시세 데이터**: 1분봉, 5분봉, 일봉 등 다양한 주기 제공
- **제한사항**: 당일 1분봉은 최근 30개만 제공 (실시간 수신 필요)

---

## 4. 인증 및 접근 방식

### OAuth 2.0 기반 인증
1. **API 신청**: KIS Developers 포털에서 API 신청
2. **인증토큰 발급**: 사용자 정보로 접근토큰(Access Token) 발급
3. **API 호출**: 발급받은 토큰으로 REST/Websocket 요청

### 보안 고려사항
- API Key 및 Secret Key 안전 관리 필수
- 환경변수 또는 보안 저장소에 보관
- 토큰 만료 시간 관리 (자동 갱신)

---

## 5. 샘플 코드 및 지원 자료

### 공식 자료
- **GitHub 샘플 코드**: Python REST/Websocket 예제 제공
- **AI 도우미 (GPTs)**: 24시간 1:1 개발 지원
- **테스트 베드**: 웹 기반 API 호출 테스트 도구
- **API 가이드 문서**: 상세한 기술 문서

---

## 6. 자동매매 시스템 구현 전략

### 하이브리드 아키텍처 (n8n + Python)

#### Phase 1: 데이터 수집 (n8n)
- 뉴스 소스에서 실시간 뉴스 수집 (웹 스크래핑 또는 RSS)
- 수집된 데이터를 Python 처리 모듈로 전달

#### Phase 2: 데이터 분석 및 종목 선정 (Python)
- 뉴스 감성 분석 (긍정/부정 판단)
- 관련 종목 추출 및 상위 5개 선정
- 재무 분석 및 기술적 분석 수행

#### Phase 3: 매매 판단 (Python)
- 전문가 기법 적용 (워렌 버핏, 피터 린치, 제시 리버모어)
- 종합 점수 계산 및 최종 종목 선정

#### Phase 4: 주문 실행 (Python + KIS API)
- 한국투자증권 API를 통해 주문 실행
- 모의투자 환경에서 먼저 테스트
- 백테스팅 결과 검증 후 실전 전환

#### Phase 5: 결과 정산 및 대시보드 (n8n + Google Sheets)
- 매매 결과를 Google Sheets에 실시간 업데이트
- 일별/누적 수익률, 보유 종목 현황 표시

---

## 7. 다음 단계

1. **KIS API 개발 환경 설정**: 로컬 Python 환경에 KIS 라이브러리 설치
2. **모의투자 계좌 개설**: KIS Developers 포털에서 신청
3. **기본 API 연동 테스트**: REST API를 통한 시세 조회, 주문 테스트
4. **n8n 워크플로우 설계**: 뉴스 수집 및 데이터 연동 구조 설계
5. **Python 모듈 개발**: 분석, 매매 판단, 주문 실행 로직 구현


